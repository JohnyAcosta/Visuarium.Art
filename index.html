<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RefHub — La navaja suiza de referencias para creativos publicitarios</title>
  <meta name="description" content="La navaja suiza de referencias para creativos publicitarios. Herramientas, archivos y recursos curados para pensar y producir trabajo creativo excelente." />

  <!-- Open Graph -->
  <meta property="og:title" content="RefHub — Referencias para creativos publicitarios" />
  <meta property="og:description" content="Herramientas, archivos y recursos curados para pensar y producir trabajo creativo excelente." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://refhub.es" />
  <meta property="og:locale" content="es_ES" />
  <meta property="og:image" content="https://refhub.es/og-image.png" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="RefHub — Referencias para creativos publicitarios" />
  <meta name="twitter:description" content="La navaja suiza de referencias para creativos publicitarios." />
  <meta name="twitter:image" content="https://refhub.es/og-image.png" />

  <!-- Favicon (inline SVG) -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23fafafa' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polygon points='12 2 22 8.5 22 15.5 12 22 2 15.5 2 8.5 12 2'/></svg>" type="image/svg+xml" />

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Geist+Mono:wght@300;400;500;600&display=swap" rel="stylesheet" />
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg: #09090b;
      --surface: #111113;
      --surface-hover: #18181b;
      --surface-border: rgba(255,255,255,0.07);
      --surface-border-hover: rgba(255,255,255,0.14);
      --text-primary: #fafafa;
      --text-secondary: #a1a1aa;
      --text-tertiary: #52525b;
      --text-micro: #3f3f46;
      --accent: #3b82f6;
      --accent-hover: #2563eb;
      --accent-glow: rgba(59,130,246,0.15);
      --green: #22c55e;
      --green-bg: rgba(34,197,94,0.1);
      --green-border: rgba(34,197,94,0.2);
      --amber: #f59e0b;
      --amber-bg: rgba(245,158,11,0.1);
      --amber-border: rgba(245,158,11,0.2);
      --blue-tag: #60a5fa;
      --blue-tag-bg: rgba(96,165,250,0.1);
      --blue-tag-border: rgba(96,165,250,0.2);
      --gold: #fbbf24;
      --gold-bg: rgba(251,191,36,0.1);
      --gold-border: rgba(251,191,36,0.2);
      --font: 'Inter', -apple-system, sans-serif;
      --font-mono: 'Geist Mono', monospace;
      --ease: cubic-bezier(0.16, 1, 0.3, 1);
    }

    html { scroll-behavior: smooth; }

    body {
      background: var(--bg);
      color: var(--text-primary);
      font-family: var(--font);
      font-size: 15px;
      -webkit-font-smoothing: antialiased;
      line-height: 1.6;
      overflow-x: hidden;
    }

    /* ═══ GRID BACKGROUND ═══ */
    .grid-bg {
      position: fixed; inset: 0; z-index: 0; pointer-events: none;
    }
    .grid-bg::before {
      content: ''; position: absolute; inset: 0;
      background-image:
        linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px);
      background-size: 72px 72px;
    }
    .grid-bg::after {
      content: ''; position: absolute; inset: 0;
      background: radial-gradient(ellipse 60% 50% at 50% 0%, rgba(59,130,246,0.06), transparent 70%),
                  radial-gradient(ellipse 80% 40% at 50% 100%, rgba(59,130,246,0.04), transparent);
    }
    .corner-cross { position: absolute; width: 16px; height: 16px; }
    .corner-cross::before, .corner-cross::after { content:''; position:absolute; background:rgba(255,255,255,0.12); }
    .corner-cross::before { width:16px; height:1px; top:50%; left:0; }
    .corner-cross::after { width:1px; height:16px; left:50%; top:0; }
    .corner-tl { top:72px; left:72px; }
    .corner-tr { top:72px; right:72px; }
    .corner-bl { bottom:72px; left:72px; }

    /* ═══ NAV ═══ */
    .nav {
      position: fixed; top:0; left:0; right:0; z-index:100;
      padding: 0 32px; height: 56px;
      display: flex; align-items: center; justify-content: space-between;
      background: rgba(9,9,11,0.8); backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--surface-border);
    }
    .nav-logo {
      display:flex; align-items:center; gap:10px;
      font-weight:700; font-size:17px; letter-spacing:-0.03em;
      color:var(--text-primary); text-decoration:none; cursor:pointer;
    }
    .nav-logo svg { width:22px; height:22px; opacity:0.9; }
    .nav-search-btn {
      width:36px; height:36px; display:flex; align-items:center; justify-content:center;
      border-radius:8px; border:1px solid var(--surface-border);
      background:none; color:var(--text-tertiary); cursor:pointer; transition:all 0.15s;
    }
    .nav-search-btn:hover { color:var(--text-secondary); border-color:var(--surface-border-hover); background:var(--surface); }
    .nav-search-btn svg { width:16px; height:16px; }

    /* ═══ SEARCH OVERLAY ═══ */
    .search-overlay {
      display:none; position:fixed; inset:0; z-index:200;
      background:rgba(0,0,0,0.6); backdrop-filter:blur(4px);
      align-items:flex-start; justify-content:center; padding-top:120px;
    }
    .search-overlay.open { display:flex; }
    .search-modal {
      background:var(--surface); border:1px solid var(--surface-border);
      border-radius:16px; width:100%; max-width:560px; overflow:hidden;
      animation: searchIn 0.2s var(--ease);
    }
    @keyframes searchIn { from{opacity:0;transform:translateY(-8px) scale(0.98)} to{opacity:1;transform:translateY(0) scale(1)} }
    .search-header { display:flex; align-items:center; gap:12px; padding:16px 20px; border-bottom:1px solid var(--surface-border); }
    .search-header svg { width:18px; height:18px; color:var(--text-tertiary); flex-shrink:0; }
    .search-input { flex:1; background:none; border:none; outline:none; color:var(--text-primary); font-size:15px; font-family:var(--font); }
    .search-input::placeholder { color:var(--text-micro); }
    .search-close { font-family:var(--font-mono); font-size:10px; color:var(--text-micro); background:rgba(255,255,255,0.06); border:1px solid var(--surface-border); padding:2px 6px; border-radius:4px; cursor:pointer; flex-shrink:0; }
    .search-results { max-height:400px; overflow-y:auto; padding:8px; }
    .search-results::-webkit-scrollbar { width:4px; }
    .search-results::-webkit-scrollbar-thumb { background:var(--surface-border); border-radius:2px; }
    .search-result-item { display:flex; flex-direction:column; gap:2px; padding:12px 14px; border-radius:10px; cursor:pointer; transition:background 0.12s; text-decoration:none; }
    .search-result-item:hover { background:var(--surface-hover); }
    .sr-name { font-size:14px; font-weight:600; color:var(--text-primary); }
    .sr-meta { font-size:12px; color:var(--text-tertiary); font-family:var(--font-mono); }
    .sr-desc { font-size:13px; color:var(--text-secondary); line-height:1.5; margin-top:2px; }
    .search-empty { padding:32px 20px; text-align:center; color:var(--text-micro); font-size:13px; }

    /* ═══ MAIN & VIEW TRANSITIONS ═══ */
    .main { position:relative; z-index:1; padding-top:56px; }

    .view {
      transition: opacity 0.3s var(--ease), transform 0.3s var(--ease);
      opacity: 1; transform: translateY(0);
    }
    .view.leaving {
      opacity: 0; transform: translateY(-20px);
      pointer-events: none;
    }
    .view.entering {
      opacity: 0; transform: translateY(20px);
    }
    .view.hidden { display: none; }

    /* ═══ HERO ═══ */
    .hero {
      display:flex; flex-direction:column; align-items:center; text-align:center;
      padding: 100px 24px 72px;
    }
    .hero h1 {
      font-size: clamp(32px, 4.5vw, 48px); font-weight:700;
      letter-spacing:-0.04em; line-height:1.12; max-width:680px; margin-bottom:16px;
    }
    .hero-sub { font-size:16px; color:var(--text-secondary); max-width:480px; line-height:1.6; }

    /* ═══ HOME CATEGORY CARDS ═══ */
    .home-categories {
      display:grid; grid-template-columns:repeat(2,1fr); gap:16px;
      max-width:880px; margin:0 auto; padding:0 32px 120px;
    }
    .cat-card {
      background:var(--surface); border:1px solid var(--surface-border); border-radius:16px;
      padding:36px 32px 32px; cursor:pointer; display:flex; flex-direction:column;
      position:relative; overflow:hidden;
      transition: all 0.25s var(--ease);
    }
    .cat-card::before {
      content:''; position:absolute; top:0; left:0; right:0; height:1px;
      background:linear-gradient(90deg, transparent, var(--cat-accent, var(--accent)), transparent);
      opacity:0; transition:opacity 0.25s;
    }
    .cat-card:hover { border-color:var(--surface-border-hover); transform:translateY(-3px); }
    .cat-card:hover::before { opacity:1; }
    .cat-icon {
      width:40px; height:40px; border-radius:10px; background:rgba(255,255,255,0.04);
      border:1px solid var(--surface-border); display:flex; align-items:center; justify-content:center;
      margin-bottom:20px; color:var(--text-tertiary); transition:color 0.2s, border-color 0.2s;
    }
    .cat-card:hover .cat-icon { color:var(--text-secondary); border-color:var(--surface-border-hover); }
    .cat-icon svg { width:20px; height:20px; }
    .cat-name { font-size:20px; font-weight:700; letter-spacing:-0.02em; margin-bottom:8px; }
    .cat-desc { font-size:14px; color:var(--text-secondary); line-height:1.6; margin-bottom:20px; flex:1; }
    .cat-count { font-family:var(--font-mono); font-size:12px; color:var(--text-micro); letter-spacing:0.03em; }
    .cat-count strong { color:var(--text-tertiary); font-weight:600; }

    /* ═══ CATEGORY VIEW ═══ */
    .category-view { max-width:1200px; margin:0 auto; padding:0 32px; }
    .cv-header { padding:48px 0 0; margin-bottom:32px; }
    .cv-back {
      display:inline-flex; align-items:center; gap:6px; font-size:13px; font-weight:500;
      color:var(--text-tertiary); cursor:pointer; margin-bottom:24px; transition:color 0.15s;
      background:none; border:none; font-family:var(--font); text-decoration:none;
    }
    .cv-back:hover { color:var(--text-secondary); }
    .cv-back svg { width:14px; height:14px; }
    .cv-title { font-size:28px; font-weight:700; letter-spacing:-0.03em; margin-bottom:6px; }
    .cv-desc { font-size:15px; color:var(--text-secondary); max-width:520px; }

    /* ═══ SUBCATEGORY TABS ═══ */
    .sub-tabs {
      display:flex; gap:4px; padding-bottom:24px; border-bottom:1px solid var(--surface-border);
      margin-bottom:32px; overflow-x:auto; scrollbar-width:none;
    }
    .sub-tabs::-webkit-scrollbar { display:none; }
    .sub-tab {
      padding:8px 16px; font-size:13px; font-weight:500; color:var(--text-tertiary);
      background:none; border:1px solid transparent; border-radius:8px; cursor:pointer;
      transition:all 0.15s; white-space:nowrap; font-family:var(--font);
    }
    .sub-tab:hover { color:var(--text-secondary); background:rgba(255,255,255,0.03); }
    .sub-tab.active { color:var(--text-primary); background:var(--surface); border-color:var(--surface-border); }
    .sub-tab-count { font-family:var(--font-mono); font-size:11px; color:var(--text-micro); margin-left:6px; }

    /* ═══ TOOL GRID ═══ */
    .tool-grid {
      display:grid; grid-template-columns:repeat(auto-fill, minmax(340px, 1fr));
      gap:14px; padding-bottom:80px;
    }

    /* ═══ TOOL CARD ═══ */
    .tool-card {
      background:var(--surface); border:1px solid var(--surface-border); border-radius:14px;
      padding:24px; display:flex; flex-direction:column; transition:all 0.2s;
    }
    .tool-card:hover { border-color:var(--surface-border-hover); transform:translateY(-1px); }

    .tc-header {
      display:flex; align-items:flex-start; gap:14px; margin-bottom:14px;
    }

    /* Thumbnail */
    .tc-thumb {
      width:40px; height:40px; border-radius:8px; border:1px solid var(--surface-border);
      background:var(--surface-hover); object-fit:cover; flex-shrink:0;
      display:flex; align-items:center; justify-content:center; overflow:hidden;
    }
    .tc-thumb img {
      width:100%; height:100%; object-fit:cover; border-radius:7px;
      display:block;
    }
    .tc-thumb-fallback {
      font-family:var(--font-mono); font-size:13px; font-weight:600;
      color:var(--text-tertiary); letter-spacing:-0.02em;
    }

    .tc-meta { flex:1; min-width:0; }
    .tc-type {
      font-family:var(--font-mono); font-size:12px; letter-spacing:0.03em;
      color:var(--text-tertiary); display:block; margin-bottom:2px;
    }
    .tc-name-row { display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
    .tc-name { font-size:17px; font-weight:700; color:var(--text-primary); letter-spacing:-0.02em; }

    /* Featured badge */
    .tc-featured {
      font-family:var(--font-mono); font-size:10px; color:var(--gold);
      background:var(--gold-bg); border:1px solid var(--gold-border);
      padding:2px 6px; border-radius:4px; white-space:nowrap;
      display:inline-flex; align-items:center; gap:3px;
    }
    .tc-featured svg { width:10px; height:10px; }

    .tc-price-wrap { flex-shrink:0; margin-left:auto; }

    .price-badge {
      font-family:var(--font-mono); font-size:11px; font-weight:500;
      letter-spacing:0.03em; padding:3px 9px; border-radius:6px;
    }
    .price-free { background:var(--green-bg); color:var(--green); border:1px solid var(--green-border); }
    .price-paid { background:var(--amber-bg); color:var(--amber); border:1px solid var(--amber-border); }
    .price-freemium { background:var(--blue-tag-bg); color:var(--blue-tag); border:1px solid var(--blue-tag-border); }

    .tc-url {
      font-family:var(--font-mono); font-size:12px; color:var(--text-micro);
      text-decoration:none; display:block; margin-bottom:10px; transition:color 0.15s;
    }
    .tool-card:hover .tc-url { color:var(--text-tertiary); }
    .tc-desc { font-size:14px; color:var(--text-secondary); line-height:1.65; flex:1; margin-bottom:16px; }
    .tc-tags { display:flex; flex-wrap:wrap; gap:5px; margin-bottom:18px; }
    .tc-tag {
      font-family:var(--font-mono); font-size:11px; letter-spacing:0.02em;
      color:var(--text-micro); background:rgba(255,255,255,0.03);
      border:1px solid var(--surface-border); padding:3px 9px; border-radius:6px;
    }
    .tc-open {
      display:block; text-align:center; padding:10px 16px;
      background:rgba(255,255,255,0.04); border:1px solid var(--surface-border);
      color:var(--text-secondary); font-size:13px; font-weight:500;
      border-radius:9px; text-decoration:none; transition:all 0.15s; font-family:var(--font);
    }
    .tc-open:hover { background:rgba(255,255,255,0.07); color:var(--text-primary); border-color:var(--surface-border-hover); }
    .fest-award { font-family:var(--font-mono); font-size:12px; color:#fbbf24; margin-bottom:10px; display:block; }
    .tc-open.primary { background:var(--accent); border-color:var(--accent); color:#fff; }
    .tc-open.primary:hover { background:var(--accent-hover); border-color:var(--accent-hover); }

    /* ═══ FOOTER ═══ */
    .divider { height:1px; background:var(--surface-border); max-width:1200px; margin:0 auto; }
    .footer {
      max-width:1200px; margin:0 auto; padding:32px 32px 56px;
      display:flex; justify-content:space-between; align-items:center;
    }
    .footer-text { font-family:var(--font-mono); font-size:12px; color:var(--text-micro); }

    /* ═══ FADE-UP ═══ */
    .fade-up { opacity:0; transform:translateY(16px); transition:all 0.5s var(--ease); }
    .fade-up.visible { opacity:1; transform:translateY(0); }
    .stagger > .fade-up:nth-child(1){transition-delay:0s}
    .stagger > .fade-up:nth-child(2){transition-delay:.06s}
    .stagger > .fade-up:nth-child(3){transition-delay:.12s}
    .stagger > .fade-up:nth-child(4){transition-delay:.18s}
    .stagger > .fade-up:nth-child(5){transition-delay:.24s}
    .stagger > .fade-up:nth-child(6){transition-delay:.3s}
    .stagger > .fade-up:nth-child(7){transition-delay:.36s}
    .stagger > .fade-up:nth-child(8){transition-delay:.42s}

    /* ═══ RESPONSIVE ═══ */
    @media (max-width:768px) {
      .nav { padding:0 16px; }
      .hero { padding:80px 20px 56px; }
      .home-categories { grid-template-columns:1fr; padding:0 20px 80px; }
      .category-view { padding:0 20px; }
      .cv-header { padding-top:32px; }
      .tool-grid { grid-template-columns:1fr; }
      .sub-tabs { gap:2px; }
      .footer { padding:24px 20px 40px; flex-direction:column; gap:8px; }
    }
  </style>
</head>
<body>

<div class="grid-bg">
  <div class="corner-cross corner-tl"></div>
  <div class="corner-cross corner-tr"></div>
  <div class="corner-cross corner-bl"></div>
</div>

<nav class="nav">
  <a class="nav-logo" onclick="navigate('home')">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polygon points="12 2 22 8.5 22 15.5 12 22 2 15.5 2 8.5 12 2"/>
      <line x1="12" y1="22" x2="12" y2="15.5"/>
      <polyline points="22 8.5 12 15.5 2 8.5"/>
    </svg>
    RefHub
  </a>
  <button class="nav-search-btn" onclick="openSearch()" title="Buscar (⌘K)">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/>
    </svg>
  </button>
</nav>

<div class="search-overlay" id="searchOverlay" onclick="closeSearchOutside(event)">
  <div class="search-modal">
    <div class="search-header">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
      <input class="search-input" id="searchInput" type="text" placeholder="Buscar herramienta o recurso..." autocomplete="off" />
      <button class="search-close" onclick="closeSearch()">ESC</button>
    </div>
    <div class="search-results" id="searchResults"></div>
  </div>
</div>

<div class="main">

  <!-- HOME -->
  <div class="view" id="homeView">
    <section class="hero">
      <h1 class="fade-up">La navaja suiza de referencias para creativos publicitarios</h1>
      <p class="hero-sub fade-up">Herramientas, archivos y recursos curados para pensar, buscar referencias y producir trabajo creativo excelente.</p>
    </section>
    <div class="home-categories stagger">
      <div class="cat-card fade-up" style="--cat-accent:var(--accent)" onclick="navigate('visual')">
        <div class="cat-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <rect x="2" y="2" width="20" height="20" rx="2.18"/>
            <line x1="7" y1="2" x2="7" y2="22"/><line x1="17" y1="2" x2="17" y2="22"/>
            <line x1="2" y1="12" x2="22" y2="12"/><line x1="2" y1="7" x2="22" y2="7"/><line x1="2" y1="17" x2="22" y2="17"/>
          </svg>
        </div>
        <div class="cat-name">Referencias Visuales</div>
        <div class="cat-desc">Cinematografía, gráfica, arte, stock, IA generativa, campañas y trabajo premiado. Todo el material visual para construir propuestas creativas sólidas.</div>
        <div class="cat-count"><strong id="visualCount">0</strong> recursos en 7 subcategorías</div>
      </div>
      <div class="cat-card fade-up" style="--cat-accent:#a855f7" onclick="navigate('thinking')">
        <div class="cat-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="M9.663 17h4.674M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
          </svg>
        </div>
        <div class="cat-name">Pensamiento Creativo</div>
        <div class="cat-desc">Herramientas de ideación, desbloqueo, copywriting y tono de voz. Para cuando necesitas pensar antes de producir.</div>
        <div class="cat-count"><strong id="thinkingCount">0</strong> recursos en 2 subcategorías</div>
      </div>
    </div>
  </div>

  <!-- CATEGORY VIEW -->
  <div class="view hidden" id="categoryView">
    <div class="category-view">
      <div class="cv-header">
        <button class="cv-back" onclick="navigate('home')">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>
          Volver
        </button>
        <div class="cv-title" id="cvTitle"></div>
        <div class="cv-desc" id="cvDesc"></div>
      </div>
      <div class="sub-tabs" id="subTabs"></div>
      <div class="tool-grid stagger" id="toolGrid"></div>
    </div>
  </div>

  <div class="divider"></div>
  <footer class="footer">
    <span class="footer-text">RefHub — Creativos en publicidad</span>
    <span class="footer-text">Última actualización: Febrero 2026</span>
  </footer>
</div>

<script>

// ═══════════════════════════════════════
// DATA
// ═══════════════════════════════════════

const CATEGORIES = {
  visual: {
    name: 'Referencias Visuales',
    desc: 'Cinematografía, gráfica, arte, stock, IA generativa, campañas y trabajo premiado para construir propuestas creativas sólidas.',
    subcategories: [
      { id:'cine', name:'Cinematografía & Spots', tools:[
        { type:'Biblioteca cinematográfica', name:'ShotDeck', url:'https://shotdeck.com', price:'paid', desc:'Millones de fotogramas buscables por color, composición, iluminación y emoción. Creado por el DOP nominado al Oscar Lawrence Sher. El estándar del sector.', tags:['Fotogramas','Color','Iluminación'], featured:true },
        { type:'Galería cinematográfica', name:'Film Grab', url:'https://film-grab.com', price:'free', desc:'Capturas de películas por título. Cuando tienes un referente concreto en mente y quieres explorar su lenguaje visual completo.', tags:['Por película','Fotogramas','Gratis'] },
        { type:'Análisis de color', name:'Shot Cafe', url:'https://shot.cafe', price:'free', desc:'Fotogramas con RGB Parade incluido. Para comunicar el tratamiento de color exacto a tu colorista sin ambigüedades.', tags:['Etalonaje','RGB Parade','Color'] },
        { type:'IA + referencia', name:'Film Vibes', url:'https://filmvibes.io', price:'free', desc:'Describes el mood y te devuelve fotogramas de spots relevantes. Búsqueda semántica por IA orientada a publicidad audiovisual.', tags:['IA','Spots','Mood'] },
        { type:'Técnicas en movimiento', name:'Eyecandy', url:'https://eyecannndy.com', price:'free', desc:'Técnicas cinematográficas en GIF: crash zoom, split diopter, match cut... Para comunicar con el director sin ambigüedades.', tags:['Técnicas','GIFs','Cámara'] },
        { type:'Biblioteca mixta', name:'Frame Set', url:'https://frameset.app', price:'freemium', desc:'+430.000 fotogramas con filtros para comerciales. Para encontrar el tipo de plano exacto que necesitas justificar al director.', tags:['Planos','Comerciales','+430k'] },
      ]},
      { id:'grafica', name:'Gráfica & Print', tools:[
        { type:'Gráfica publicitaria', name:"Lürzer's Archive", url:'https://www.luerzersarchive.com', price:'freemium', desc:'La biblia del diseño gráfico publicitario desde 1984. Selecciona la mejor publicidad gráfica mundial. Print, poster, packaging. Para DA y copy que trabajan gráfica.', tags:['Print','Gráfica','Histórico'], featured:true },
        { type:'Portfolios creativos', name:'Behance', url:'https://behance.net', price:'free', desc:'Para buscar fotógrafos y directores por estilo. Cuando necesitas encontrar el talento adecuado para una estética muy definida.', tags:['Fotógrafos','Directores','Talento'] },
        { type:'Diseño web curado', name:'Siteinspire', url:'https://siteinspire.com', price:'free', desc:'Galería curada de diseño web de alta calidad. Para referencias de composición y jerarquía tipográfica en piezas digitales.', tags:['Composición','Tipografía','Digital'] },
      ]},
      { id:'arte', name:'Arte & Cultura', tools:[
        { type:'Arte & cultura', name:'Colossal', url:'https://thisiscolossal.com', price:'free', desc:'Arte contemporáneo, fotografía e instalación. Para cuando la idea necesita salir del mundo publicitario y conectar con algo más grande que un briefing.', tags:['Arte','Cultura','Instalación'] },
        { type:'Industria creativa', name:"It's Nice That", url:'https://itsnicethat.com', price:'free', desc:'La referencia de la industria creativa global. Diseño, publicidad e ilustración con criterio editorial sólido. Por creativos, para creativos.', tags:['Diseño','Publicidad','Editorial'] },
        { type:'Creadores globales', name:'WePresent', url:'https://wepresent.wetransfer.com', price:'free', desc:'Historias sobre artistas, fotógrafos y cineastas del mundo entero. Para cuando necesitas un referente humano, no solo visual.', tags:['Artistas','Historias','Global'] },
        { type:'Cultura visual', name:'Nowness', url:'https://nowness.com', price:'free', desc:'Cortometrajes, documentales y piezas de arte visual comisionadas. Cuando necesitas referencias que trascienden la publicidad.', tags:['Cortometrajes','Arte','Premium'] },
      ]},
      { id:'stock', name:'Stock Foto & Video', tools:[
        { type:'Fotografía gratuita', name:'Unsplash', url:'https://unsplash.com', price:'free', desc:'La mejor biblioteca de fotos gratuitas en alta resolución. Licencia libre para uso comercial sin atribución.', tags:['Fotos','Gratis','Alta resolución'], featured:true },
        { type:'Fotos y video', name:'Pexels', url:'https://pexels.com', price:'free', desc:'Fotos y videos gratuitos. Alternativa a Unsplash con buena selección de video stock.', tags:['Fotos','Video','Gratis'] },
        { type:'Video cinematográfico', name:'Artgrid', url:'https://artgrid.io', price:'paid', desc:'Stock de video cinematográfico premium. De los creadores de Artlist, calidad de producción profesional.', tags:['Video','Cinematográfico','Premium'], featured:true },
        { type:'Video gratuito', name:'Pexels Video', url:'https://pexels.com/videos', price:'free', desc:'Sección de video de Pexels. Videos gratuitos para proyectos con presupuesto limitado.', tags:['Video','Gratis','Stock'] },
        { type:'Video para web', name:'Coverr', url:'https://coverr.co', price:'free', desc:'Videos gratuitos pensados para fondos web y headers. Loops y clips cortos de alta calidad.', tags:['Web','Loops','Gratis'] },
      ]},
      { id:'ia', name:'IA Generativa', tools:[
        { type:'Generación de imágenes', name:'Midjourney', url:'https://midjourney.com', price:'paid', desc:'El estándar de generación de imágenes con IA. Resultados artísticos y estilizados, ideal para moodboards y conceptos visuales.', tags:['Imágenes','Arte','Conceptos'], featured:true },
        { type:'Video con IA', name:'Runway', url:'https://runwayml.com', price:'paid', desc:'Generación y edición de video con IA. Gen-3 para crear clips desde texto o imagen. El futuro de la preproducción.', tags:['Video','Gen-3','Edición'], featured:true },
        { type:'Video generativo', name:'Sora', url:'https://sora.com', price:'paid', desc:'El modelo de video de OpenAI. Genera clips realistas desde texto con coherencia temporal impresionante.', tags:['OpenAI','Video','Realista'] },
        { type:'Video generativo', name:'Kling', url:'https://klingai.com', price:'freemium', desc:'Alternativa china a Sora. Genera video desde texto e imagen con buenos resultados y tier gratuito generoso.', tags:['Video','Gratis tier','Alternativa'] },
        { type:'Generación de imágenes', name:'DALL-E', url:'https://openai.com/dall-e-3', price:'paid', desc:'El generador de imágenes de OpenAI integrado en ChatGPT. Bueno para iteración rápida y conceptos.', tags:['OpenAI','Imágenes','ChatGPT'] },
        { type:'Generación de imágenes', name:'Leonardo.ai', url:'https://leonardo.ai', price:'freemium', desc:'Generador de imágenes con modelos entrenados por estilos. Buen tier gratuito para explorar.', tags:['Imágenes','Estilos','Freemium'] },
      ]},
      { id:'campanas', name:'Archivo de campañas', tools:[
        { type:'Campañas diarias', name:'The Drum Creative Works', url:'https://thedrum.com/creative-works', price:'free', desc:'Campañas nuevas de todo el mundo actualizadas cada día. El pulso en tiempo real de lo que se está produciendo ahora mismo.', tags:['Actualidad','Diario','Global'], featured:true },
        { type:'Archivo de campañas', name:'Ads of the World', url:'https://adsoftheworld.com', price:'free', desc:'La mayor base de datos de campañas globales. Filtra por sector, país y medio. Para ver el territorio competitivo de tu cliente antes de proponer nada.', tags:['Campañas','Por sector','Global'] },
        { type:'Directorio de agencias', name:'AdForum', url:'https://adforum.com', price:'free', desc:'Agencias, productoras y campañas filtradas por premios. Para investigar el historial creativo de un cliente o una categoría.', tags:['Agencias','Premios','Historia'] },
        { type:'Casos creativos', name:'Campaigns of the World', url:'https://campaignsoftheworld.com', price:'free', desc:'Campañas con contexto estratégico. Entiende por qué se tomaron las decisiones visuales y de copy, no solo cómo se ven.', tags:['Estrategia','Contexto','Global'] },
        { type:'Archivo histórico', name:'Vintage Ad Browser', url:'https://vintageadbrowser.com', price:'free', desc:'Publicidad clásica pre-digital. Para entender los orígenes visuales y de copy de una marca, o encontrar referencias retro auténticas.', tags:['Vintage','Histórico','Marcas'] },
      ]},
      { id:'premiado', name:'Trabajo premiado', tools:[
        { type:'Archivo Cannes', name:'Love The Work More', url:'https://lovetheworkmore.com', visitUrl:'https://lovetheworkmore.com', price:'free', desc:'Todos los Grand Prix de Cannes Lions organizados por año desde 1954. La memoria más completa de la publicidad mundial premiada, totalmente gratuita.', tags:['Archivo','1954–hoy','Gratis'], award:'Grand Prix desde 1954', featured:true },
        { type:'El festival', name:'Cannes Lions', url:'https://canneslions.com', visitUrl:'https://canneslions.com/awards', price:'free', desc:'El festival más importante del mundo desde 1954. El benchmark global de la creatividad en todas las disciplinas.', tags:['Cannes, Junio','Global','Todas las disciplinas'], award:"Grand Prix · Titanium · Lion d'Or", featured:true },
        { type:'Diseño & dirección de arte', name:'D&AD', url:'https://dandad.org', visitUrl:'https://dandad.org/work/annual', price:'free', desc:'El benchmark del diseño y la publicidad desde 1962. Ganar un Black Pencil es el máximo reconocimiento creativo.', tags:['Londres','Diseño','Film','Copy'], award:'Black Pencil · Yellow Pencil · Wood Pencil' },
        { type:'Publicidad integral', name:'Clio Awards', url:'https://clios.com', visitUrl:'https://clios.com/awards/winners', price:'free', desc:'Fundados en 1959, uno de los premios más veteranos. Excelencia en publicidad, diseño y entretenimiento.', tags:['Nueva York','Global','Publicidad integral'], award:'Grand Clio · Gold · Silver · Bronze' },
        { type:'Craft & copywriting', name:'The One Show', url:'https://www.oneclub.org', visitUrl:'https://www.oneclub.org/the-one-show/', price:'free', desc:'El festival del One Club. Idea y ejecución inseparables. Muy valorado en copywriting y craft cinematográfico.', tags:['Nueva York','Craft','Copy'], award:'Gold Pencil · Best of Show' },
        { type:'Festival iberoamericano', name:'El Sol', url:'https://elsolfestival.com', visitUrl:'https://elsolfestival.com/edic-anteriores/palmares/', price:'free', desc:'El festival de referencia iberoamericano desde 1986, celebrado en Málaga. 40 ediciones de lo mejor de España y LATAM.', tags:['Málaga, Mayo','España + LATAM','40 ediciones'], award:'Sol de Platino · Gran Premio · Sol de Oro' },
        { type:'Premios nacionales', name:'C de C', url:'https://www.clubdecreatividad.com', visitUrl:'https://www.clubdecreatividad.com', price:'free', desc:'Premios Nacionales de Creatividad del Club de Creativos. La radiografía más honesta de la creatividad española.', tags:['San Sebastián, Marzo','España','Todas las disciplinas'], award:'Gran Premio · Oro · Plata · Bronce' },
        { type:'Arte dirección & diseño', name:'ADC Annual Awards', url:'https://adcglobal.org', visitUrl:'https://adcglobal.org', price:'free', desc:'Los premios del Art Directors Club, fundados en 1921. El reconocimiento más antiguo del diseño gráfico.', tags:['Nueva York','Dirección de arte','Diseño gráfico'], award:'Black Cube · Gold Cube · Silver Cube' },
      ]},
    ]
  },
  thinking: {
    name: 'Pensamiento Creativo',
    desc: 'Herramientas de ideación, desbloqueo, copywriting y tono de voz para antes de producir.',
    subcategories: [
      { id:'ideacion', name:'Ideación & Desbloqueo', tools:[
        { type:'Ideación', name:'Deck of Brilliance', url:'https://deckofbrilliance.com', price:'freemium', desc:'218 herramientas creativas con miles de ejemplos de campañas ganadoras. La creatividad empieza por negarte a quedarte con lo primero que se te ocurre.', tags:['Ideación','Campañas','Estrategia'], featured:true },
        { type:'Pensamiento lateral', name:'Oblique Strategies', url:'https://obliquestrategies.ca', price:'free', desc:'Creadas por Brian Eno y Peter Schmidt en 1975. Una carta aleatoria con instrucción críptica para romper bloqueos. Usadas por Bowie, Coldplay y U2 en estudio.', tags:['Azar','Lateral','Clásico'] },
      ]},
      { id:'copy', name:'Copy & Tono de voz', tools:[
        { type:'Archivo de copy', name:'Swiped.co', url:'https://swiped.co', price:'free', desc:'El mejor archivo de copy publicitario analizado pieza a pieza. +500 anuncios clásicos de Ogilvy, Caples y grandes campañas de print con análisis de por qué funcionan.', tags:['Copy clásico','Print','Análisis'], featured:true },
        { type:'Copy reciente', name:'Swipe File', url:'https://swipefile.com', price:'free', desc:'Campañas actuales con el copy visible, actualizado diariamente. Para el pulso de qué tono y qué estructuras de copy están funcionando ahora mismo.', tags:['Actualidad','Campañas','Digital'] },
        { type:'Tono de voz', name:'Copy Style Guide', url:'https://copystyleguide.com', price:'free', desc:'Analiza el tono de voz de marcas grandes (Apple, Oatly, Nike, Airbnb, Netflix) con ejemplos reales. 16 perfiles de tono para describir y alinear la voz de un proyecto.', tags:['Brand voice','Tono','Referencias de marca'] },
        { type:'Campañas globales', name:'Ads of the World', url:'https://adsoftheworld.com', price:'free', desc:'Para investigar cómo hablan las marcas competidoras. No solo qué se ve, sino qué se dice: claims, headlines, tonos por categoría y mercado.', tags:['Competencia','Claims','Copy global'] },
      ]},
    ]
  }
};

// ═══════════════════════════════════════
// STATE
// ═══════════════════════════════════════
let currentCategory = null;
let currentSubcategory = null;
let isTransitioning = false;

// ═══════════════════════════════════════
// HELPERS
// ═══════════════════════════════════════

function getDomain(url) {
  try { return new URL(url).hostname; } catch { return ''; }
}

function getInitials(name) {
  return name.split(/[\s&]+/).map(w => w[0]).filter(Boolean).slice(0,2).join('').toUpperCase();
}

function thumbURL(url) {
  const domain = getDomain(url);
  return `https://www.google.com/s2/favicons?domain=${domain}&sz=64`;
}

function sortFeatured(tools) {
  return [...tools].sort((a, b) => (b.featured ? 1 : 0) - (a.featured ? 1 : 0));
}

// ═══════════════════════════════════════
// VIEW TRANSITIONS
// ═══════════════════════════════════════

function transitionViews(fromId, toId, cb) {
  if (isTransitioning) return;
  isTransitioning = true;
  const from = document.getElementById(fromId);
  const to = document.getElementById(toId);

  from.classList.add('leaving');

  setTimeout(() => {
    from.classList.add('hidden');
    from.classList.remove('leaving');

    to.classList.remove('hidden');
    to.classList.add('entering');

    // Force reflow
    to.offsetHeight;

    to.classList.remove('entering');

    if (cb) cb();

    setTimeout(() => {
      isTransitioning = false;
      observeFadeUp();
    }, 50);
  }, 300);
}

// ═══════════════════════════════════════
// NAVIGATION (HASH ROUTING)
// ═══════════════════════════════════════

function navigate(path, pushState = true) {
  if (isTransitioning) return;

  if (path === 'home' || !path) {
    if (pushState) history.pushState(null, '', '#home');
    if (currentCategory !== null) {
      currentCategory = null;
      currentSubcategory = null;
      transitionViews('categoryView', 'homeView', () => {
        resetHomeFadeUp();
      });
    }
    return;
  }

  // Parse "visual" or "visual/cine"
  const parts = path.split('/');
  const catKey = parts[0];
  const subId = parts[1] || null;

  const cat = CATEGORIES[catKey];
  if (!cat) { navigate('home', pushState); return; }

  const validSub = subId && cat.subcategories.find(s => s.id === subId);
  const targetSub = validSub ? subId : cat.subcategories[0].id;

  const hashPath = subId && validSub ? `${catKey}/${targetSub}` : catKey;
  if (pushState) history.pushState(null, '', '#' + hashPath);

  const needsViewSwitch = currentCategory === null;
  currentCategory = catKey;
  currentSubcategory = targetSub;

  document.getElementById('cvTitle').textContent = cat.name;
  document.getElementById('cvDesc').textContent = cat.desc;
  renderSubTabs(cat);
  renderTools(cat);

  if (needsViewSwitch) {
    transitionViews('homeView', 'categoryView');
  } else {
    observeFadeUp();
  }

  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function selectSubcategory(subId) {
  if (!currentCategory) return;
  currentSubcategory = subId;
  const cat = CATEGORIES[currentCategory];
  history.pushState(null, '', `#${currentCategory}/${subId}`);
  renderSubTabs(cat);
  renderTools(cat);
  setTimeout(observeFadeUp, 50);
}

function resetHomeFadeUp() {
  document.querySelectorAll('#homeView .fade-up').forEach(el => el.classList.remove('visible'));
  setTimeout(observeFadeUp, 50);
}

// Handle browser back/forward
window.addEventListener('popstate', () => {
  const hash = location.hash.replace('#', '') || 'home';
  navigate(hash, false);
});

// ═══════════════════════════════════════
// RENDER
// ═══════════════════════════════════════

function renderSubTabs(cat) {
  document.getElementById('subTabs').innerHTML = cat.subcategories.map(sc =>
    `<button class="sub-tab ${sc.id === currentSubcategory ? 'active' : ''}" onclick="selectSubcategory('${sc.id}')">
      ${sc.name}<span class="sub-tab-count">${sc.tools.length}</span>
    </button>`
  ).join('');
}

function renderTools(cat) {
  const sub = cat.subcategories.find(sc => sc.id === currentSubcategory);
  if (!sub) return;
  const sorted = sortFeatured(sub.tools);
  document.getElementById('toolGrid').innerHTML = sorted.map(t => toolCardHTML(t)).join('');
}

// ═══════════════════════════════════════
// TOOL CARD HTML
// ═══════════════════════════════════════

function toolCardHTML(t) {
  const priceLabel = { free:'Gratis', paid:'De pago', freemium:'Freemium' }[t.price];
  const priceClass = { free:'price-free', paid:'price-paid', freemium:'price-freemium' }[t.price];
  const linkUrl = t.visitUrl || t.url;
  const award = t.award ? `<span class="fest-award">${t.award}</span>` : '';
  const isPremiadoSection = currentSubcategory === 'premiado';
  const domain = getDomain(t.url);
  const initials = getInitials(t.name);
  const imgSrc = thumbURL(t.url);

  const featuredBadge = t.featured
    ? `<span class="tc-featured"><svg viewBox="0 0 24 24" fill="currentColor" stroke="none"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>Destacado</span>`
    : '';

  return `
    <div class="tool-card fade-up">
      <div class="tc-header">
        <div class="tc-thumb" id="thumb-${domain}">
          <img src="${imgSrc}" alt="" onerror="this.parentElement.innerHTML='<span class=tc-thumb-fallback>${initials}</span>'" />
        </div>
        <div class="tc-meta">
          <span class="tc-type">${t.type}</span>
          <div class="tc-name-row">
            <span class="tc-name">${t.name}</span>
            ${featuredBadge}
          </div>
        </div>
        <div class="tc-price-wrap">
          <span class="price-badge ${priceClass}">${priceLabel}</span>
        </div>
      </div>
      ${award}
      <a class="tc-url" href="${t.url}" target="_blank">${t.url.replace('https://','')}</a>
      <p class="tc-desc">${t.desc}</p>
      <div class="tc-tags">${t.tags.map(tag => `<span class="tc-tag">${tag}</span>`).join('')}</div>
      <a class="tc-open ${isPremiadoSection ? 'primary' : ''}" href="${linkUrl}" target="_blank">${isPremiadoSection ? 'Ver ganadores →' : 'Abrir →'}</a>
    </div>`;
}

// ═══════════════════════════════════════
// SEARCH
// ═══════════════════════════════════════

function openSearch() {
  document.getElementById('searchOverlay').classList.add('open');
  document.getElementById('searchInput').value = '';
  document.getElementById('searchResults').innerHTML = '';
  setTimeout(() => document.getElementById('searchInput').focus(), 60);
}
function closeSearch() { document.getElementById('searchOverlay').classList.remove('open'); }
function closeSearchOutside(e) { if (e.target === document.getElementById('searchOverlay')) closeSearch(); }

function getAllTools() {
  const all = [];
  for (const [catKey, cat] of Object.entries(CATEGORIES)) {
    for (const sub of cat.subcategories) {
      for (const tool of sub.tools) {
        all.push({ ...tool, catKey, catName:cat.name, subId:sub.id, subName:sub.name });
      }
    }
  }
  return all;
}

function doSearch(query) {
  const q = query.trim().toLowerCase();
  const results = document.getElementById('searchResults');
  if (!q) { results.innerHTML = ''; return; }

  const all = getAllTools();
  const matched = all.filter(t =>
    t.name.toLowerCase().includes(q) || t.desc.toLowerCase().includes(q) ||
    t.type.toLowerCase().includes(q) || t.tags.some(tag => tag.toLowerCase().includes(q))
  );
  const seen = new Set();
  const unique = matched.filter(t => { if (seen.has(t.name)) return false; seen.add(t.name); return true; });

  if (!unique.length) { results.innerHTML = '<div class="search-empty">No se encontraron resultados</div>'; return; }

  results.innerHTML = unique.map(t => `
    <a class="search-result-item" href="${t.visitUrl || t.url}" target="_blank">
      <span class="sr-name">${t.name}${t.featured ? ' ★' : ''}</span>
      <span class="sr-meta">${t.subName} · ${t.catName}</span>
      <span class="sr-desc">${t.desc.substring(0,100)}${t.desc.length > 100 ? '…' : ''}</span>
    </a>`).join('');
}

document.getElementById('searchInput').addEventListener('input', e => doSearch(e.target.value));
document.addEventListener('keydown', e => {
  if ((e.metaKey || e.ctrlKey) && e.key === 'k') { e.preventDefault(); openSearch(); }
  if (e.key === 'Escape') closeSearch();
});

// ═══════════════════════════════════════
// SCROLL ANIMATIONS
// ═══════════════════════════════════════

function observeFadeUp() {
  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) { entry.target.classList.add('visible'); observer.unobserve(entry.target); }
    });
  }, { threshold: 0.08 });
  document.querySelectorAll('.fade-up:not(.visible)').forEach(el => observer.observe(el));
}

// ═══════════════════════════════════════
// INIT
// ═══════════════════════════════════════

(function init() {
  // Update counters
  for (const [key, cat] of Object.entries(CATEGORIES)) {
    const total = cat.subcategories.reduce((s, sc) => s + sc.tools.length, 0);
    const el = document.getElementById(key + 'Count');
    if (el) el.textContent = total;
  }

  // Read initial hash
  const hash = location.hash.replace('#', '') || 'home';
  if (hash === 'home' || hash === '') {
    observeFadeUp();
  } else {
    // Directly show category without animation on first load
    const parts = hash.split('/');
    const catKey = parts[0];
    const subId = parts[1] || null;
    const cat = CATEGORIES[catKey];
    if (cat) {
      const validSub = subId && cat.subcategories.find(s => s.id === subId);
      currentCategory = catKey;
      currentSubcategory = validSub ? subId : cat.subcategories[0].id;
      document.getElementById('homeView').classList.add('hidden');
      document.getElementById('categoryView').classList.remove('hidden');
      document.getElementById('cvTitle').textContent = cat.name;
      document.getElementById('cvDesc').textContent = cat.desc;
      renderSubTabs(cat);
      renderTools(cat);
      setTimeout(observeFadeUp, 50);
    } else {
      history.replaceState(null, '', '#home');
      observeFadeUp();
    }
  }
})();

</script>
</body>
</html>
