<!DOCTYPE html>
<html class="scroll-smooth" lang="es"><head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<title>Visuarium â€” Visual reference library for creatives.</title>
<meta content="CinematografÃ­a, tipografÃ­a, color, motion y campaÃ±as premiadas. Biblioteca curada de referencias visuales para creativos." name="description">
<meta content="Visuarium â€” Biblioteca de referencias visuales para creativos." property="og:title">
<meta content="CinematografÃ­a, tipografÃ­a, color, motion y campaÃ±as premiadas. Biblioteca curada de referencias visuales para creativos." property="og:description">
<meta content="website" property="og:type">
<meta content="es_ES" property="og:locale">
<meta content="summary_large_image" name="twitter:card">
<meta content="https://visuarium.art/og-image.jpg" property="og:image">
<meta content="https://visuarium.art/og-image.jpg" name="twitter:image">
<meta content="https://visuarium.art/" property="og:url">
<meta name="author" content="Johny Acosta">
<meta name="robots" content="index, follow">
<meta name="theme-color" content="#121212" media="(prefers-color-scheme: dark)">
<meta name="theme-color" content="#faf9f7" media="(prefers-color-scheme: light)">
<link rel="canonical" href="https://visuarium.art/">
<meta property="og:site_name" content="Visuarium">
<meta name="twitter:title" content="Visuarium â€” Biblioteca de referencias visuales para creativos.">
<meta name="twitter:description" content="CinematografÃ­a, tipografÃ­a, color, motion y campaÃ±as premiadas. Biblioteca curada de referencias visuales para creativos.">
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "Visuarium",
  "url": "https://visuarium.art",
  "description": "Curated visual reference library for creatives. Cinematography, typography, color, motion and award-winning campaigns.",
  "author": {
    "@type": "Person",
    "name": "Johny Acosta",
    "url": "https://www.linkedin.com/in/johny-acosta-arteta-7416911b2/"
  },
  "inLanguage": ["es", "en"]
}
</script>
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 178 178'><style>.r{fill:%23ffffff}@media(prefers-color-scheme:light){.r{fill:%23111111}}</style><path class='r' d='M89,0C39.8,0,0,39.8,0,89s39.8,89,89,89,89-39.8,89-89S138.2,0,89,0Zm0,170.2c-44.8,0-81.2-36.3-81.2-81.2S44.2,7.8,89,7.8s81.2,36.3,81.2,81.2-36.3,81.2-81.2,81.2Z'/></svg>">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&amp;family=Geist+Mono:wght@300;400;500;600&amp;display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL@24,400,0&amp;display=swap" rel="stylesheet">
<link rel="stylesheet" href="visuarium-utilities.css">
<!-- Vercel Web Analytics (solo en produccion) -->
<script>
if (location.hostname !== 'localhost' && location.hostname !== '127.0.0.1') {
  var s = document.createElement('script');
  s.defer = true;
  s.src = '/_vercel/insights/script.js';
  document.head.appendChild(s);
}
</script>
<style>
    /* Base */
      :root {
        --bg: #121212;
        --surface: #1E1E1E;
        --surface-hover: #2A2A2A;
        --surface-border: #333333;
        --surface-border-hover: rgba(255,255,255,0.15);
        --text-primary: #ffffff;
        --text-secondary: #e5e5e5;
        --text-tertiary: #a3a3a3;
        --text-micro: #737373;
        --accent: #2563eb;
        --accent-hover: #1d4ed8;
        --accent-orange: #ff0090;
        --green: #4ade80;
        --green-glass-bg: rgba(74, 222, 128, 0.1);
        --green-glass-border: rgba(74, 222, 128, 0.3);
        --green-glow: 0 0 10px rgba(74, 222, 128, 0.15);
        --amber: #fbbf24;
        --amber-glass-bg: rgba(251, 191, 36, 0.1);
        --amber-glass-border: rgba(251, 191, 36, 0.3);
        --amber-glow: 0 0 10px rgba(251, 191, 36, 0.15);
        --blue-tag: #60a5fa;
        --blue-glass-bg: rgba(96, 165, 250, 0.1);
        --blue-glass-border: rgba(96, 165, 250, 0.3);
        --blue-glow: 0 0 10px rgba(96, 165, 250, 0.15);
        --gold: #facc15;
        --gold-bg: rgba(250,204,21,0.15);
        --gold-border: rgba(250,204,21,0.25);
        --shadow-preview: 0 20px 50px rgba(0,0,0,0.5), 0 10px 20px rgba(0,0,0,0.3);
        --shadow-card: 0 10px 30px rgba(0,0,0,0.3);
        --search-overlay-bg: rgba(0,0,0,0.6);
        --search-shadow: 0 8px 32px rgba(0,0,0,0.5);
        --eye-bg: #ffffff;
        --pupil-bg: #000000;
        --font-sans: 'Inter', sans-serif;
        --font-mono: 'Geist Mono', monospace;
        --card-bg: #1E1E1E;
        --search-bg: #181818;
      }
      html.light-mode {
        --bg: #faf9f7;
        --surface: #ffffff;
        --surface-hover: #f5f4f2;
        --surface-border: #e5e5e5; 
        --surface-border-hover: rgba(0,0,0,0.15);
        --text-primary: #1a1a1a;
        --text-secondary: #404040;
        --text-tertiary: #8c8c8c;
        --text-micro: #a3a3a3;
        --accent: #2563eb;
        --accent-hover: #1d4ed8;
        --accent-orange: #ff0090;
        --green: #15803d;
        --green-glass-bg: rgba(22, 163, 74, 0.08);
        --green-glass-border: rgba(22, 163, 74, 0.25);
        --green-glow: 0 0 8px rgba(22, 163, 74, 0.1);
        --amber: #b45309;
        --amber-glass-bg: rgba(217, 119, 6, 0.08);
        --amber-glass-border: rgba(217, 119, 6, 0.25);
        --amber-glow: 0 0 8px rgba(217, 119, 6, 0.1);
        --blue-tag: #1d4ed8;
        --blue-glass-bg: rgba(37, 99, 235, 0.08);
        --blue-glass-border: rgba(37, 99, 235, 0.25);
        --blue-glow: 0 0 8px rgba(37, 99, 235, 0.1);
        --gold: #ca8a04;
        --gold-bg: rgba(202,138,4,0.1);
        --gold-border: rgba(202,138,4,0.25);
        --shadow-preview: 0 20px 50px rgba(0,0,0,0.12), 0 10px 20px rgba(0,0,0,0.06);
        --shadow-card: 0 4px 12px rgba(0,0,0,0.06);
        --search-overlay-bg: rgba(250,249,247,0.8);
        --search-shadow: 0 8px 32px rgba(0,0,0,0.08);
        --eye-bg: #1a1a1a;
        --pupil-bg: #ffffff;
        --card-bg: #ffffff;
        --search-bg: #f3f2f0;
      }
      body {
        background-color: var(--bg);
        color: var(--text-primary);
        font-family: var(--font-sans);
        font-size: 15px;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        line-height: 1.625;
        overflow-x: hidden;
        transition: color 0.3s, background-color 0.3s;
      }
    .grid-bg {
      position: fixed; inset: 0; z-index: 0; pointer-events: none;
    }
    .grid-bg::before {
      content: '';
      position: absolute; inset: 0; opacity: 0.4;
      background-image: linear-gradient(var(--surface-border) 1px, transparent 1px), linear-gradient(90deg, var(--surface-border) 1px, transparent 1px);
      background-size: 72px 72px;
    }
    .corner-cross {
      position: absolute; width: 1rem; height: 1rem; opacity: 0.5; display: none;
    }
    @media (min-width: 768px) { .corner-cross { display: block; } }
    }
    .corner-cross::before, .corner-cross::after {
      content: '';
      position: absolute; background-color: var(--surface-border);
    }
    .corner-cross::before {
      width: 1rem; height: 1px; top: 50%; left: 0;
    }
    .corner-cross::after {
      width: 1px; height: 1rem; left: 50%; top: 0;
    }
    .nav-btn:hover {
      color: var(--text-primary); border-color: var(--surface-border-hover); background-color: var(--surface);
    }
    .search-modal {
      animation: searchIn 0.2s cubic-bezier(0.16, 1, 0.3, 1);
    }
    @keyframes searchIn {
      from { opacity: 0; transform: translateY(-8px) scale(0.98); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }
    .sub-tab:hover {
      border-color: var(--text-tertiary);
      color: var(--text-primary);
      background: var(--surface-hover);
    }
    .sub-tab.active {
      background: var(--accent-orange);
      border-color: var(--accent-orange);
      color: #fff;
      transform: scale(1.05);
      box-shadow: 0 4px 12px rgba(255,0,144,.3);
      z-index: 1;
    }
    .card-missing {
        border: 2px dashed var(--surface-border);
        transition: border-color 0.3s, background-color 0.3s;
    }
    .card-missing:hover {
        border-color: var(--accent-orange);
        background-color: var(--surface-hover);
    }
    .tool-card {
        background-color: var(--card-bg);
        border: 1px solid var(--surface-border);
        height: 100%;
        display: flex;
        flex-direction: column;
        transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        scroll-margin-top: 100px;
    }
    .tool-card.highlight-pulse {
        animation: pulseCard 1s ease-in-out;
        border-color: var(--accent-orange);
    }
    @keyframes pulseCard {
        0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255,0,144, 0.7); }
        50% { transform: scale(1.02); box-shadow: 0 0 0 10px rgba(255,0,144, 0); }
        100% { transform: scale(1); }
    }
    .tool-card:hover {
      transform: translateY(-4px) scale(1.01);
      border-color: var(--accent-orange);
      box-shadow: 
        0 0 0 1px var(--accent-orange),
        0 0 40px -10px rgba(255,0,144, 0.3),
        0 20px 40px -10px rgba(0, 0, 0, 0.4);
      z-index: 10;
    }
    .tool-card:hover .tc-url {
      color: var(--text-tertiary);
    }
    .tool-card:hover .arrow-icon, .tool-card:hover .copy-icon {
        color: var(--text-primary);
        opacity: 1;
    }
    .tool-card:hover .arrow-icon {
        transform: translate(2px, -2px);
        color: var(--accent-orange);
    }
    .screenshot-preview.visible {
      opacity: 1;
      transform: scale(1) translateY(0);
    }
    .fade-up {
      opacity: 0;
      transform: translateY(14px);
      transition: all 0.45s cubic-bezier(0.16, 1, 0.3, 1);
    }
    .fade-up.visible {
      opacity: 1;
      transform: translateY(0);
    }
    /* stagger delays applied dynamically via observeFadeUp() */
    .glass-badge {
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }
    .price-free {
        background: var(--green-glass-bg);
        color: var(--green);
        border: 1px solid var(--green-glass-border);
        box-shadow: var(--green-glow);
    }
    .price-paid {
        background: var(--amber-glass-bg);
        color: var(--amber);
        border: 1px solid var(--amber-glass-border);
        box-shadow: var(--amber-glow);
    }
    .price-freemium {
        background: var(--blue-glass-bg);
        color: var(--blue-tag);
        border: 1px solid var(--blue-glass-border);
        box-shadow: var(--blue-glow);
    }
    .status-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background-color: currentColor;
      box-shadow: 0 0 6px currentColor;
    }
    .new-badge {
      background: var(--accent-orange);
      color: white;
      font-size: 9px;
      font-weight: 800;
      padding: 3px 7px;
      border-radius: 999px;
      margin-left: 8px;
      letter-spacing: 0.05em;
      box-shadow: 0 0 10px rgba(255,0,144,0.6);
      position: relative;
      overflow: hidden;
      animation: pulse-orange 2s infinite;
      display: inline-flex;
      align-items: center;
    }
    @keyframes pulse-orange {
      0% { box-shadow: 0 0 0 0 rgba(255,0,144, 0.7); }
      70% { box-shadow: 0 0 0 6px rgba(255,0,144, 0); }
      100% { box-shadow: 0 0 0 0 rgba(255,0,144, 0); }
    }
    .icon-gradient {
        background: linear-gradient(135deg, rgba(255,255,255,0.05), rgba(255,255,255,0.01));
    }
    .tool-initials {
        width: 2rem;
        height: 2rem;
        border-radius: 0.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: var(--font-mono);
        font-weight: 700;
        font-size: 12px;
        letter-spacing: 0.04em;
        color: #fff;
        background: linear-gradient(135deg, var(--initials-color), color-mix(in srgb, var(--initials-color) 70%, #000));
        box-shadow: 0 2px 8px color-mix(in srgb, var(--initials-color) 30%, transparent);
    }
    html.light-mode .tool-initials {
        background: linear-gradient(135deg, color-mix(in srgb, var(--initials-color) 85%, #fff), var(--initials-color));
        box-shadow: 0 2px 8px color-mix(in srgb, var(--initials-color) 20%, transparent);
    }
    .eye.blink {
        height: 2px !important;
        background-color: var(--text-primary) !important;
        border-radius: 2px !important;
        overflow: hidden;
    }
    .eye.blink .pupil {
        opacity: 0;
    }
    .ouch-bubble {
        position: absolute;
        left: 100%;
        top: 100%;
        margin-left: 8px;
        margin-top: 4px;
        background: var(--accent-orange);
        color: #fff;
        font-family: var(--font-mono);
        font-weight: 800;
        font-size: 11px;
        padding: 4px 8px;
        border-radius: 8px;
        border-top-left-radius: 0;
        pointer-events: none;
        opacity: 0;
        transform: scale(0.5) rotate(-10deg);
        transform-origin: top left;
        transition: all 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
        z-index: 50;
        box-shadow: 0 4px 12px rgba(255,0,144,0.4);
        white-space: nowrap;
    }
    .ouch-bubble.visible {
        opacity: 1;
        transform: scale(1) rotate(0deg);
        margin-top: 8px;
    }
    .ouch-bubble::before {
        content: '';
        position: absolute;
        top: -4px;
        left: 0;
        width: 0;
        height: 0;
        border-left: 6px solid var(--accent-orange);
        border-top: 6px solid transparent;
    }
    .ouch-bubble.angry-bubble {
        background: #ef4444;
        box-shadow: 0 4px 15px rgba(239, 68, 68, 0.5);
        transform: scale(1.4) rotate(0deg) !important;
        margin-top: 12px !important;
        font-size: 13px;
    }
    .ouch-bubble.angry-bubble::before {
        border-left-color: #ef4444;
    }
    
    /* Ojo izquierdo enfadado: \ */
    .eye.angry:first-child {
        border-radius: 50%;
        overflow: hidden;
        clip-path: polygon(0 0, 100% 30%, 100% 100%, 0% 100%);
    }

    /* Ojo derecho enfadado: / */
    .eye.angry:last-child {
        border-radius: 50%;
        overflow: hidden;
        clip-path: polygon(0 30%, 100% 0, 100% 100%, 0% 100%);
    }

    .eye.angry .pupil {
        background-color: #ef4444;
        width: 6px;
        height: 6px;
    }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* COPY TOAST NOTIFICATION */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .copy-toast {
        position: absolute;
        top: 48px;
        right: 24px;
        background: var(--green-glass-bg);
        border: 1px solid var(--green-glass-border);
        color: var(--green);
        font-family: var(--font-mono);
        font-size: 11px;
        font-weight: 600;
        padding: 6px 12px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        gap: 6px;
        opacity: 0;
        transform: translateY(-8px) scale(0.9);
        pointer-events: none;
        transition: all 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
        box-shadow: var(--green-glow), 0 4px 12px rgba(0,0,0,0.15);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        z-index: 20;
    }
    .copy-toast.show {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
    .copy-toast-icon {
        width: 14px;
        height: 14px;
        flex-shrink: 0;
    }
    /* Mobile category bottom sheet */
    #mobileCatSheet.open { display: block; }
    #mobileCatSheet.open #mobileCatPanel { transform: translateY(0) !important; }
    .mobile-cat-item {
      display: flex; align-items: center; gap: 12px;
      padding: 14px 16px; border-radius: 12px; cursor: pointer;
      transition: background-color 0.15s; border: none; width: 100%;
      background: none; text-align: left;
    }
    .mobile-cat-item:hover, .mobile-cat-item:focus { background-color: var(--surface-hover); }
    .mobile-cat-item.active { background-color: rgba(255,0,144,0.1); }
    .mobile-cat-item .cat-name { font-size: 15px; font-weight: 500; color: var(--text-primary); }
    .mobile-cat-item.active .cat-name { color: var(--accent-orange); font-weight: 600; }
    .mobile-cat-item .cat-count {
      margin-left: auto; font-family: var(--font-mono); font-size: 11px; color: var(--text-micro);
    }
    /* Skip to content */
    .skip-link {
      position: absolute; top: -100%; left: 50%; transform: translateX(-50%);
      background: var(--accent-orange); color: #fff; padding: 8px 16px; border-radius: 0 0 8px 8px;
      font-size: 13px; font-weight: 600; z-index: 1000; text-decoration: none;
      transition: top 0.2s;
    }
    .skip-link:focus { top: 0; }
  </style>
</head>
<body>
<a href="#main-content" class="skip-link">Saltar al contenido</a>
<div class="grid-bg">
<div class="corner-cross top-[72px] left-[72px]"></div>
<div class="corner-cross top-[72px] right-[72px]"></div>
<div class="corner-cross bottom-[72px] left-[72px]"></div>
</div>
<nav aria-label="Main navigation" class="fixed top-0 left-0 right-0 z-[100] h-14 px-4 flex items-center justify-between border-b border-[var(--surface-border)] transition-colors duration-300 backdrop-blur-[20px]" style="background: color-mix(in srgb, var(--bg) 85%, transparent);">
<div class="w-[140px] flex items-center">
<a class="flex items-center gap-[10px] font-bold text-[17px] tracking-tight text-[var(--text-primary)] hover:opacity-80 transition-opacity no-underline" href="#">
      Visuarium
      <span class="font-[family-name:var(--font-mono)] text-[9px] font-semibold text-[var(--accent-orange)] bg-[rgba(255,0,144,0.15)] border border-[rgba(255,0,144,0.3)] px-[5px] py-[2px] rounded ml-[6px] align-super tracking-wide">BETA</span>
</a>
</div>
<div class="absolute left-1/2 top-1/2 cursor-pointer select-none" id="eyesContainer" style="padding: 10px; transform: translate(-50%, -50%);">
<div class="relative">
<div class="flex gap-1 items-center pointer-events-none" id="googlyEyes">
<div class="eye w-4 h-4 bg-[var(--eye-bg)] rounded-full relative flex items-center justify-center transition-all duration-100">
<div class="pupil w-[7px] h-[7px] bg-[var(--pupil-bg)] rounded-full absolute transition-transform duration-75 ease-out"></div>
</div>
<div class="eye w-4 h-4 bg-[var(--eye-bg)] rounded-full relative flex items-center justify-center transition-all duration-100">
<div class="pupil w-[7px] h-[7px] bg-[var(--pupil-bg)] rounded-full absolute transition-transform duration-75 ease-out"></div>
</div>
</div>
<div class="ouch-bubble" id="ouchBubble">OUCH!</div>
</div>
</div>
<div class="w-[140px] flex items-center justify-end gap-2">
<button aria-label="Toggle language Spanish/English" class="nav-btn font-[family-name:var(--font-mono)] text-xs font-semibold tracking-wide w-9 h-9 flex items-center justify-center rounded-lg border border-[var(--surface-border)] bg-transparent text-[var(--text-tertiary)] cursor-pointer transition-all duration-150 hover:text-[var(--text-primary)] hover:border-[var(--surface-border-hover)] hover:bg-[var(--surface)]" id="langToggle" title="ES / EN">ES</button>
<button aria-label="Toggle light/dark theme" class="nav-btn w-9 h-9 flex items-center justify-center rounded-lg border border-[var(--surface-border)] bg-transparent text-[var(--text-tertiary)] cursor-pointer transition-all duration-150 hover:text-[var(--text-primary)] hover:border-[var(--surface-border-hover)] hover:bg-[var(--surface)]" id="themeToggle" title="Cambiar tema">
<span class="material-symbols-outlined text-[18px]">light_mode</span>
</button>
<button aria-label="Search tools" class="nav-btn w-9 h-9 flex items-center justify-center rounded-lg border border-[var(--surface-border)] bg-transparent text-[var(--text-tertiary)] cursor-pointer transition-all duration-150 hover:text-[var(--text-primary)] hover:border-[var(--surface-border-hover)] hover:bg-[var(--surface)]" onclick="openSearch()" title="Buscar (âŒ˜K)">
<svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24">
<circle cx="11" cy="11" r="8"></circle>
<line x1="21" x2="16.65" y1="21" y2="16.65"></line>
</svg>
</button>
</div>
</nav>
<div role="dialog" aria-label="Search" aria-modal="true" class="search-overlay hidden fixed inset-0 z-[200] bg-[var(--search-overlay-bg)] backdrop-blur-[4px] items-start justify-center pt-[120px] px-4" id="searchOverlay" onclick="if(event.target===this) closeSearch()">
<div class="search-modal bg-[var(--surface)] border border-[var(--surface-border)] rounded-2xl w-full max-w-[560px] overflow-hidden shadow-[var(--search-shadow)]">
<div class="flex items-center gap-3 px-5 py-4 border-b border-[var(--surface-border)]">
<svg class="w-[18px] h-[18px] text-[var(--text-tertiary)] shrink-0" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24">
<circle cx="11" cy="11" r="8"></circle>
<line x1="21" x2="16.65" y1="21" y2="16.65"></line>
</svg>
<input aria-label="Search tools and resources" autocomplete="off" class="flex-1 bg-transparent border-none outline-none text-[var(--text-primary)] text-[15px] font-[family-name:var(--font-sans)] placeholder-[var(--text-micro)]" id="searchInput" placeholder="Buscar herramienta o recurso..." type="text">
<button class="font-[family-name:var(--font-mono)] text-[10px] text-[var(--text-micro)] bg-[var(--surface-hover)] border border-[var(--surface-border)] px-1.5 py-0.5 rounded cursor-pointer" onclick="closeSearch()">ESC</button>
</div>
<div class="search-results max-h-[400px] overflow-y-auto p-2 scrollbar-thin scrollbar-thumb-[var(--surface-border)]" id="searchResults"></div>
</div>
</div>
<div class="screenshot-preview fixed z-[1000] w-[320px] h-[200px] bg-[var(--surface)] border border-[var(--surface-border)] rounded-xl shadow-[var(--shadow-preview)] overflow-hidden pointer-events-none opacity-0 scale-95 translate-y-[10px] transition-all duration-200 ease-out hidden md:block" id="screenshotPreview">
<div class="loading absolute inset-0 flex items-center justify-center bg-[var(--surface-hover)] text-[var(--text-micro)] text-xs font-[family-name:var(--font-mono)]" id="previewLoadingText">
    Cargando
    <div class="ml-2 w-5 h-5 border-2 border-[var(--surface-border)] border-t-[var(--text-tertiary)] rounded-full animate-spin"></div>
</div>
<img alt="Website preview" class="w-full h-full object-cover block" src="" style="display:none;">
</div>
<main id="main-content" class="relative z-10 pt-24 max-w-[1200px] mx-auto min-h-screen">
<h1 class="sr-only" id="mainHeading">Visuarium â€” Visual reference library for creatives</h1>
<section class="px-4 md:px-8 pt-4 pb-2">
<div class="flex justify-center mb-4" id="mobileCatTrigger">
  <button class="flex items-center gap-2 px-5 py-3 rounded-full border border-[var(--surface-border)] bg-[var(--surface)] text-[var(--text-primary)] text-[15px] font-medium font-[family-name:var(--font-sans)] transition-all duration-200" onclick="openMobileCategories()" id="mobileCatBtn" aria-haspopup="listbox" aria-expanded="false">
    <span id="mobileCatLabel">CinematografÃ­a</span>
    <svg class="w-4 h-4 text-[var(--text-tertiary)]" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><polyline points="6 9 12 15 18 9"></polyline></svg>
  </button>
</div>
<div role="tablist" aria-label="Categories" class="fade-up flex flex-wrap justify-center items-center gap-x-3 gap-y-3 px-6 mb-5 max-w-[1100px] mx-auto" id="subTabs">
</div>
<p id="catDesc" role="status" aria-live="polite" class="text-center text-[13px] text-[var(--text-tertiary)] font-[family-name:var(--font-mono)] mt-1 mb-2 tracking-wide min-h-[1.5em]"></p>
</section>
<div role="tabpanel" aria-label="Tools" class="tool-grid stagger grid grid-cols-1 md:grid-cols-[repeat(auto-fill,minmax(340px,1fr))] gap-8 px-4 md:px-8 pt-2 pb-20" id="toolGrid">
</div>
<div class="h-[1px] bg-[var(--surface-border)] mx-4 md:px-8"></div>
<footer aria-label="Site information" class="footer px-4 md:px-8 pt-8 pb-14 flex flex-wrap justify-between items-center gap-2">
<span class="font-[family-name:var(--font-mono)] text-xs text-[var(--accent-orange)]" id="footerLeft"></span>
<span class="font-[family-name:var(--font-mono)] text-xs text-[var(--accent-orange)]" id="footerRight"></span>
</footer>
</main>
<script src="data.js"></script>
<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// i18n SYSTEM
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let lang = 'es';
const T = {
  pageTitle:        { es:'Visuarium â€” Visual reference library for creatives.', en:'Visuarium â€” Visual reference library for creatives.' },
  searchPlaceholder:{ es:'Buscar herramienta o recurso...', en:'Search tool or resource...' },
  noResults:        { es:'No se encontraron resultados', en:'No results found' },
  open:             { es:'Abrir â†’', en:'Open â†’' },
  viewWinners:      { es:'Ver ganadores â†’', en:'View winners â†’' },
  featured:         { es:'Destacado', en:'Featured' },
  free:             { es:'Gratis', en:'Free' },
  paid:             { es:'De pago', en:'Paid' },
  freemium:         { es:'Freemium', en:'Freemium' },
  loading:          { es:'Cargando', en:'Loading' },
  footerLeft:       { es:'ğŸª No cookies. No tracking. Just tools.', en:'ğŸª No cookies. No tracking. Just tools.' },
  footerRight:      { es:'Curado por', en:'Curated by' },
  copyLink:         { es:'Copiar enlace', en:'Copy link' },
  copied:           { es:'Â¡Enlace copiado!', en:'Link copied!' },
  missingTitle:     { es:'Â¿Falta algo?', en:'Missing something?' },
  missingSub:       { es:'EnvÃ­anos tu sugerencia', en:'Send us your suggestion' },
};
function t(key) { return T[key]?.[lang] || T[key]?.es || key; }
function getText(obj) { if (!obj) return ''; if (typeof obj === 'string') return obj; return obj[lang] || obj.es || ''; }

// DATA â†’ ver data.js

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let currentTab = null;
const _loadTime = Date.now();
let _firstInteraction = false;

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// HELPERS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function getDomain(u){try{return new URL(u).hostname}catch{return''}}
function getInitials(n){return n.split(/[\s&]+/).map(w=>w[0]).filter(Boolean).slice(0,2).join('').toUpperCase()}
function sortFeatured(a){return[...a].sort((x,y)=>(y.featured?1:0)-(x.featured?1:0))}
function escapeHTML(s){if(!s)return'';return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#39;')}

// Genera un color Ãºnico basado en el nombre
function stringToColor(str) {
  let hash = 0;
  for (let i = 0; i < str.length; i++) {
    hash = str.charCodeAt(i) + ((hash << 5) - hash);
  }
  
  const colors = [
    '#6366f1', '#8b5cf6', '#ec4899', '#f59e0b', '#10b981', '#06b6d4',
    '#3b82f6', '#f97316', '#84cc16', '#a855f7', '#14b8a6', '#ef4444',
  ];
  
  return colors[Math.abs(hash) % colors.length];
}

function thumbURL(u) {
  return `https://www.google.com/s2/favicons?domain=${getDomain(u)}&sz=64`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// THUMBNAIL FALLBACK MEJORADO
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function replaceWithInitials(img) {
  const card = img.closest('.tool-card');
  if (!card) return;
  const toolName = card.querySelector('.font-inter').textContent.trim();
  const initials = getInitials(toolName);
  const color = stringToColor(toolName);

  img.parentElement.innerHTML = `
    <div class="tool-initials" style="--initials-color: ${color};">
      ${initials}
    </div>`;
}

function handleThumbError(img) {
  replaceWithInitials(img);
}

function handleThumbLoad(img) {
  // Detect generic/blurry favicons: if the image is tiny (16x16 or less)
  // Google returns a default globe icon at that size for unknown sites
  if (img.naturalWidth <= 16 || img.naturalHeight <= 16) {
    replaceWithInitials(img);
    return;
  }
  // Also detect the blank/transparent default favicon via canvas
  try {
    const c = document.createElement('canvas');
    c.width = img.naturalWidth;
    c.height = img.naturalHeight;
    const ctx = c.getContext('2d');
    ctx.drawImage(img, 0, 0);
    const data = ctx.getImageData(0, 0, c.width, c.height).data;
    // Check if mostly transparent or single-color (generic globe)
    let transparent = 0, total = data.length / 4;
    for (let i = 3; i < data.length; i += 4) {
      if (data[i] < 10) transparent++;
    }
    if (transparent / total > 0.85) {
      replaceWithInitials(img);
    }
  } catch(e) { /* CORS â€” keep favicon */ }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SCREENSHOT PREVIEW (OG Image + Favicon fallback)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const previewEl = document.getElementById('screenshotPreview');
const previewImg = previewEl.querySelector('img');
const previewLoading = previewEl.querySelector('.loading');
let previewTimeout = null, currentPreviewUrl = null;

function getPreviewImageUrl(tool) {
  if (tool.ogImage) return { src: tool.ogImage, isFallback: false };
  return { src: `https://www.google.com/s2/favicons?domain=${getDomain(tool.url)}&sz=128`, isFallback: true };
}

function showScreenshotPreview(tool, event) {
  if (window.innerWidth <= 768) return;
  clearTimeout(previewTimeout);
  currentPreviewUrl = tool.url;
  updatePreviewPosition(event);

  previewImg.classList.remove('p-10', 'object-contain', 'bg-[var(--surface-hover)]');
  const preview = getPreviewImageUrl(tool);

  if (preview.isFallback) {
    previewImg.classList.add('p-10', 'object-contain', 'bg-[var(--surface-hover)]');
  }

  previewImg.src = preview.src;
  previewImg.style.display = 'block';
  previewLoading.style.display = 'none';
  previewEl.classList.add('visible');
}

function updatePreviewPosition(e) {
  if (!previewEl.classList.contains('visible')) return;
  previewEl.style.left = Math.min(e.clientX + 20, window.innerWidth - 340) + 'px';
  previewEl.style.top = Math.min(e.clientY + 20, window.innerHeight - 220) + 'px';
}

function hideScreenshotPreview() {
  previewEl.classList.remove('visible');
  currentPreviewUrl = null;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// COPY LINK WITH TOAST
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showCopyToast(card) {
    const existingToast = card.querySelector('.copy-toast');
    if (existingToast) existingToast.remove();
    
    const toast = document.createElement('div');
    toast.className = 'copy-toast';
    toast.innerHTML = `
        <svg class="copy-toast-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="20 6 9 17 4 12"></polyline>
        </svg>
        <span>${t('copied')}</span>
    `;
    
    card.appendChild(toast);
    
    setTimeout(() => toast.classList.add('show'), 10);
    
    setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => toast.remove(), 250);
    }, 2000);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// NAVIGATION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function selectTab(id, pushState = true) {

  const sub = SUBCATEGORIES.find(s => s.id === id) || SUBCATEGORIES[0];
  currentTab = sub.id;
  if (pushState) history.pushState(null, '', '#' + sub.id);
  renderTabs();
  renderTools(sub);
  updateMobileCatLabel();
  setTimeout(observeFadeUp, 30);
  // Vercel Analytics â€” track category views (only on user interaction, not on init)
  if (pushState && window.va) {
    window.va('event', { name: 'category_view', data: { category: sub.id, label: sub.name?.es || sub.id } });
    // Time to first interaction
    if (!_firstInteraction) {
      _firstInteraction = true;
      const seconds = Math.round((Date.now() - _loadTime) / 1000);
      window.va('event', { name: 'time_to_first_click', data: { seconds, category: sub.id } });
    }
  }
}


window.addEventListener('popstate', () => {
  selectTab(location.hash.replace('#', '') || SUBCATEGORIES[0].id, false);
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// RENDER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderTabs() {
  document.getElementById('subTabs').innerHTML = SUBCATEGORIES.map(sc =>
    `<button role="tab" aria-selected="${sc.id === currentTab}" tabindex="${sc.id === currentTab ? '0' : '-1'}" class="sub-tab px-5 py-2.5 text-[15px] rounded-full border border-[var(--surface-border)] bg-[var(--surface)] text-[var(--text-secondary)] cursor-pointer transition-all duration-300 ease-out font-[family-name:var(--font-sans)] leading-none whitespace-nowrap select-none ${sc.id === currentTab ? 'active' : ''}" onclick="selectTab('${sc.id}')">${getText(sc.name)}</button>`
  ).join('');
}

function renderTools(sub) {
  const sorted = sortFeatured(sub.tools);
  const grid = document.getElementById('toolGrid');
  const descEl = document.getElementById('catDesc');
  if (descEl) descEl.textContent = sub.desc ? getText(sub.desc) : '';
  grid.innerHTML = sorted.map(t => toolCardHTML(t)).join('') + missingCardHTML();
  
  grid.querySelectorAll('.tool-card').forEach((card, i) => {
    const tool = sorted[i];
    
    card.addEventListener('mouseenter', e => {
      previewTimeout = setTimeout(() => showScreenshotPreview(tool, e), 300)
    });
    card.addEventListener('mousemove', updatePreviewPosition);
    card.addEventListener('mouseleave', () => { 
      clearTimeout(previewTimeout); 
      hideScreenshotPreview() 
    });
    
    const copyBtn = card.querySelector('.copy-btn');
    if (copyBtn) {
      copyBtn.addEventListener('click', (e) => {
        e.preventDefault();
        e.stopPropagation();
        const url = card.dataset.url;
        navigator.clipboard.writeText(url).then(() => {
          showCopyToast(card);
        }).catch(err => {
          console.error('Error al copiar:', err);
        });
      });
    }
  });
}

function toolCardHTML(tool) {
  const safeName = escapeHTML(tool.name);
  const priceLabel = t(tool.price);
  const priceClass = { free: 'price-free', paid: 'price-paid', freemium: 'price-freemium' }[tool.price];
  const linkUrl = escapeHTML(tool.visitUrl || tool.url);
  const award = tool.award ? `<span class="fest-award font-[family-name:var(--font-mono)] text-xs text-[var(--gold)] mb-2.5 block">${escapeHTML(getText(tool.award))}</span>` : '';
  const featuredBadge = tool.featured ? `<span class="tc-featured font-[family-name:var(--font-mono)] text-[10px] text-[var(--gold)] bg-[var(--gold-bg)] border border-[var(--gold-border)] px-1.5 py-0.5 rounded ml-2 whitespace-nowrap inline-flex items-center gap-[3px]"><svg class="w-2.5 h-2.5" viewBox="0 0 24 24" fill="currentColor" stroke="none"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>${t('featured')}</span>` : '';
  const newBadge = tool.isNew ? `<span class="new-badge">NEW</span>` : '';

  // Generar fallback con iniciales
  const initials = escapeHTML(getInitials(tool.name));
  const color = stringToColor(tool.name);

  return `
    <div id="card-${tool.name.replace(/\s+/g, '-').toLowerCase()}" class="tool-card fade-up rounded-2xl p-7 flex flex-col transition-all duration-300 relative group overflow-hidden" data-url="${escapeHTML(tool.url)}">
      <div class="absolute top-6 right-6 flex gap-2 items-center">
        <button class="copy-btn text-[var(--text-tertiary)] opacity-0 transition-all duration-300 copy-icon hover:text-[var(--text-primary)]" title="${t('copyLink')}" aria-label="${t('copyLink')}">
             <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
        </button>
        <a href="${linkUrl}" target="_blank" rel="noopener noreferrer" class="text-[var(--text-tertiary)] transition-all duration-300 arrow-icon" aria-label="${lang === 'en' ? 'Open' : 'Abrir'} ${safeName}" onclick="if(window.va) window.va('event', { name: 'tool_open', data: { tool: '${escapeHTML(tool.name)}', category: '${currentTab}', price: '${tool.price}' } })">
             <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg>
        </a>
      </div>
      <div class="flex items-center gap-4 mb-5">
        <div class="w-12 h-12 rounded-xl icon-gradient p-[1px] shrink-0 flex items-center justify-center overflow-hidden">
          <div class="w-full h-full bg-[var(--surface-hover)] rounded-[11px] flex items-center justify-center overflow-hidden">
             <img loading="lazy" class="w-8 h-8 object-contain block opacity-90" src="${thumbURL(tool.url)}" alt="${safeName} icon" onerror="handleThumbError(this)" onload="handleThumbLoad(this)" />
          </div>
        </div>
        <div class="flex-1 min-w-0 pr-16">
            <span class="font-[family-name:var(--font-mono)] text-[11px] font-medium tracking-[0.08em] text-[var(--text-tertiary)] uppercase opacity-80 block mb-1">${escapeHTML(getText(tool.type))}</span>
            <div class="flex items-center flex-wrap gap-2">
                <h2 class="text-[19px] font-bold text-[var(--text-primary)] tracking-tight leading-none font-inter" style="margin:0">${safeName}</h2>
                ${newBadge}
                ${featuredBadge}
            </div>
        </div>
      </div>
      ${award}
      <p class="text-[15px] text-[var(--text-secondary)] leading-[1.65] flex-1 mb-6 font-light opacity-90">${escapeHTML(getText(tool.desc))}</p>
      <div class="flex flex-wrap items-center justify-between gap-y-3 mt-auto pt-2">
        <div class="flex flex-wrap gap-2">
            ${tool.tags.map(tag => `<span class="font-[family-name:var(--font-mono)] text-[11px] font-medium tracking-wide text-[var(--text-tertiary)] border-b border-transparent hover:border-[var(--surface-border-hover)] px-0 pb-[1px] hover:text-[var(--text-secondary)] transition-all cursor-default">${escapeHTML(getText(tag))}</span>`).join('')}
        </div>
        <span class="price-badge glass-badge font-[family-name:var(--font-mono)] text-[10px] font-semibold tracking-wide px-3 py-1 rounded-full ${priceClass}">
            <span class="status-dot"></span>
            ${priceLabel}
        </span>
      </div>
    </div>`;
}

function missingCardHTML() {
  return `
    <a href="mailto:johny@visuarium.art"
       class="card-missing fade-up rounded-2xl p-7 flex flex-col items-center justify-center text-center no-underline"
       style="min-height: 200px;">
      <span class="material-symbols-outlined text-[var(--text-micro)]" style="font-size:32px; margin-bottom:12px;">add_circle</span>
      <span class="text-[17px] font-semibold text-[var(--text-primary)] mb-2">${t('missingTitle')}</span>
      <span class="text-[13px] text-[var(--text-tertiary)] font-[family-name:var(--font-mono)]">${t('missingSub')}</span>
    </a>`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SEARCH
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let _searchReturnFocus = null;
function openSearch() {
  _searchReturnFocus = document.activeElement;
  document.getElementById('searchOverlay').classList.replace('hidden', 'flex');
  document.getElementById('searchInput').value = '';
  document.getElementById('searchResults').innerHTML = '';
  setTimeout(() => document.getElementById('searchInput').focus(), 60);
}

function closeSearch() {
  document.getElementById('searchOverlay').classList.replace('flex', 'hidden');
  if (_searchReturnFocus) { _searchReturnFocus.focus(); _searchReturnFocus = null; }
}

function highlightCard(toolName) {
    const id = `card-${toolName.replace(/\s+/g, '-').toLowerCase()}`;
    setTimeout(() => {
        const card = document.getElementById(id);
        if(card) {
            card.scrollIntoView({ behavior: 'smooth', block: 'center' });
            card.classList.add('highlight-pulse');
            setTimeout(() => card.classList.remove('highlight-pulse'), 1500);
        }
    }, 100);
}

function doSearch(q) {
  q = q.trim().toLowerCase();
  
  if(!document.getElementById('searchOverlay').classList.contains('flex')) {
      const grid = document.getElementById('toolGrid');
      const cards = grid.querySelectorAll('.tool-card');
      if(q === '') {
          cards.forEach(card => card.style.display = 'flex');
          return;
      }
      cards.forEach(card => {
          const text = card.textContent.toLowerCase();
          card.style.display = text.includes(q) ? 'flex' : 'none';
      });
      return;
  }
  
  const results = document.getElementById('searchResults');
  if (!q) { results.innerHTML = ''; return; }
  
  const all = [];
  SUBCATEGORIES.forEach(sc => sc.tools.forEach(tool => all.push({ ...tool, subName: sc.name, subId: sc.id })));
  
  const matched = all.filter(tool => {
    const n = tool.name.toLowerCase(), d = getText(tool.desc).toLowerCase(), tp = getText(tool.type).toLowerCase();
    const tagMatch = tool.tags.some(tag => getText(tag).toLowerCase().includes(q));
    return n.includes(q) || d.includes(q) || tp.includes(q) || tagMatch;
  });
  
  const seen = new Set();
  const unique = matched.filter(tool => { if (seen.has(tool.name)) return false; seen.add(tool.name); return true });
  
  if (!unique.length) { results.innerHTML = `<div class="p-8 text-center text-[var(--text-micro)] text-[13px]">${t('noResults')}</div>`; return; }
  
  results.innerHTML = unique.map(tool => `
    <a href="#${tool.subId}" role="option" class="flex flex-col gap-[2px] p-3.5 rounded-lg cursor-pointer transition-colors duration-100 no-underline hover:bg-[var(--surface-hover)]"
       onclick="event.preventDefault();closeSearch();selectTab('${escapeHTML(tool.subId)}');highlightCard('${escapeHTML(tool.name)}')">
      <span class="text-sm font-semibold text-[var(--text-primary)]">${escapeHTML(tool.name)}${tool.featured ? ' â˜…' : ''}</span>
      <span class="text-xs text-[var(--text-tertiary)] font-[family-name:var(--font-mono)]">${escapeHTML(getText(tool.subName))}</span>
      <span class="text-[13px] text-[var(--text-secondary)] leading-normal mt-0.5">${escapeHTML(getText(tool.desc).substring(0, 100))}${getText(tool.desc).length > 100 ? 'â€¦' : ''}</span>
    </a>`).join('');
}

let searchAnalyticsTimer = null;
document.getElementById('searchInput').addEventListener('input', e => {
  doSearch(e.target.value);
  // Track search with 800ms debounce to avoid firing on every keystroke
  clearTimeout(searchAnalyticsTimer);
  const q = e.target.value.trim();
  if (q.length >= 3) {
    searchAnalyticsTimer = setTimeout(() => {
      if (window.va) window.va('event', { name: 'search', data: { query: q, lang: lang } });
    }, 800);
  }
});
document.addEventListener('keydown', e => {
  if ((e.metaKey || e.ctrlKey) && e.key === 'k') { e.preventDefault(); openSearch(); }
  if (e.key === 'Escape') closeSearch();
});

// Keyboard navigation for subcategory tabs
document.getElementById('subTabs').addEventListener('keydown', function(e) {
  if (!['ArrowLeft', 'ArrowRight', 'Home', 'End'].includes(e.key)) return;
  e.preventDefault();
  const tabs = [...this.querySelectorAll('.sub-tab')];
  const currentIndex = tabs.findIndex(t => t.classList.contains('active'));
  let newIndex;
  if (e.key === 'ArrowRight') newIndex = (currentIndex + 1) % tabs.length;
  else if (e.key === 'ArrowLeft') newIndex = (currentIndex - 1 + tabs.length) % tabs.length;
  else if (e.key === 'Home') newIndex = 0;
  else if (e.key === 'End') newIndex = tabs.length - 1;
  tabs[newIndex].focus();
  tabs[newIndex].click();
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// THEME TOGGLE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const themeToggleBtn = document.getElementById('themeToggle');
const themeIcon = themeToggleBtn.querySelector('.material-symbols-outlined');

function setTheme(isLight) {
  if (isLight) {
    document.documentElement.classList.add('light-mode');
    themeIcon.textContent = 'dark_mode';
  } else {
    document.documentElement.classList.remove('light-mode');
    themeIcon.textContent = 'light_mode';
  }
  localStorage.setItem('visuarium-theme', isLight ? 'light' : 'dark');
  // Update favicon to match theme â€” ring icon
  const ringFill = isLight ? '%23111111' : '%23ffffff';
  document.querySelector('link[rel="icon"]').href = `data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 178 178'><path fill='${ringFill}' d='M89,0C39.8,0,0,39.8,0,89s39.8,89,89,89,89-39.8,89-89S138.2,0,89,0Zm0,170.2c-44.8,0-81.2-36.3-81.2-81.2S44.2,7.8,89,7.8s81.2,36.3,81.2,81.2-36.3,81.2-81.2,81.2Z'/></svg>`;
}

themeToggleBtn.addEventListener('click', () => {
  setTheme(!document.documentElement.classList.contains('light-mode'));
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// LANGUAGE TOGGLE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const langBtn = document.getElementById('langToggle');
function setLang(newLang) {
  lang = newLang;
  localStorage.setItem('visuarium-lang', lang);
  document.documentElement.setAttribute('lang', lang);
  langBtn.textContent = lang.toUpperCase();
  document.title = t('pageTitle');
  document.getElementById('searchInput').placeholder = t('searchPlaceholder');
  document.getElementById('previewLoadingText').textContent = t('loading');
  document.getElementById('footerLeft').textContent = t('footerLeft');
  document.getElementById('footerRight').innerHTML = `${t('footerRight')} <a class="text-[var(--accent-orange)] underline decoration-1 underline-offset-2 transition-colors duration-150 hover:text-[var(--text-primary)]" href="https://www.linkedin.com/in/johny-acosta-arteta-7416911b2/" target="_blank" rel="noopener">Johny</a>`;
  document.getElementById('mainHeading').textContent = t('pageTitle');
  document.querySelector('meta[property="og:locale"]').content = lang === 'en' ? 'en_US' : 'es_ES';
  const sub = SUBCATEGORIES.find(s => s.id === currentTab) || SUBCATEGORIES[0];
  renderTabs();
  renderTools(sub);
  updateMobileCatLabel();
  setTimeout(observeFadeUp, 30);
}
langBtn.addEventListener('click', () => {
  if (window.va) window.va('event', { name: 'lang_switch', data: { to: lang === 'es' ? 'en' : 'es' } });
  setLang(lang === 'es' ? 'en' : 'es');
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// GOOGLY EYES & OUCH INTERACTION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const eyesContainer = document.getElementById('eyesContainer');
const eyes = document.querySelectorAll('.eye');
const ouchBubble = document.getElementById('ouchBubble');
let isBlinking = false;
let clickCount = 0;
let isAngry = false;

const allPhrases = ['OUCH!', 'HEY!', 'Stop it!', 'T_T', 'Why?', 'Nooo!', 'Auch!', 'Ow!'];
let availablePhrases = [...allPhrases];

function getRandomPhrase() {
    if (availablePhrases.length === 0) {
        availablePhrases = [...allPhrases];
    }
    const randomIndex = Math.floor(Math.random() * availablePhrases.length);
    const phrase = availablePhrases[randomIndex];
    availablePhrases.splice(randomIndex, 1);
    return phrase;
}

document.addEventListener('mousemove', e => {
  if (isBlinking) return;
  eyes.forEach(eye => {
    const p = eye.querySelector('.pupil');
    const r = eye.getBoundingClientRect();
    const cx = r.left + r.width / 2, cy = r.top + r.height / 2;
    let a = Math.atan2(e.clientY - cy, e.clientX - cx);
    let d = Math.min(3, Math.hypot(e.clientX - cx, e.clientY - cy));
    p.style.transform = `translate(${Math.cos(a) * d}px,${Math.sin(a) * d}px)`;
  });
});

eyesContainer.addEventListener('click', () => {
    if (isAngry || isBlinking) return;
    
    clickCount++;
    isBlinking = true;

    if (clickCount >= 3) {
        // ANGRY MODE CON RESET COMPLETO DESPUÃ‰S DE 5 SEGUNDOS
        isAngry = true;
        eyes.forEach(eye => {
            eye.classList.remove('blink');
            eye.classList.add('angry');
        });
        ouchBubble.innerText = 'STOP!';
        ouchBubble.classList.add('visible', 'angry-bubble');
        isBlinking = false;
        
        // Todo se resetea despuÃ©s de 5 segundos
        setTimeout(() => {
            ouchBubble.classList.remove('visible', 'angry-bubble');
            eyes.forEach(eye => eye.classList.remove('angry'));
            isAngry = false;
            clickCount = 0;
            availablePhrases = [...allPhrases];
        }, 5000);
        
    } else {
        // NORMAL OUCH MODE
        eyes.forEach(eye => eye.classList.add('blink'));
        const phrase = getRandomPhrase();
        ouchBubble.innerText = phrase;
        ouchBubble.classList.add('visible');
        
        setTimeout(() => {
            eyes.forEach(eye => eye.classList.remove('blink'));
            ouchBubble.classList.remove('visible');
            isBlinking = false;
        }, 800);
    }
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MOBILE CATEGORIES BOTTOM SHEET
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderMobileCatList() {
  const list = document.getElementById('mobileCatList');
  if (!list) return;
  list.innerHTML = SUBCATEGORIES.map(sc => `
    <button class="mobile-cat-item ${sc.id === currentTab ? 'active' : ''}" onclick="selectTab('${sc.id}'); closeMobileCategories();" role="option" aria-selected="${sc.id === currentTab}">
      <span class="cat-name">${getText(sc.name)}</span>
      <span class="cat-count">${sc.tools.length}</span>
    </button>
  `).join('');
}

function updateMobileCatLabel() {
  const label = document.getElementById('mobileCatLabel');
  if (!label) return;
  const current = SUBCATEGORIES.find(s => s.id === currentTab);
  if (current) label.textContent = getText(current.name);
  const title = document.getElementById('mobileCatTitle');
  if (title) title.textContent = lang === 'en' ? 'Categories' : 'CategorÃ­as';
}

function openMobileCategories() {
  renderMobileCatList();
  const sheet = document.getElementById('mobileCatSheet');
  sheet.classList.add('open');
  document.body.style.overflow = 'hidden';
  document.getElementById('mobileCatBtn').setAttribute('aria-expanded', 'true');
}

function closeMobileCategories() {
  const sheet = document.getElementById('mobileCatSheet');
  document.body.style.overflow = '';
  document.getElementById('mobileCatBtn').setAttribute('aria-expanded', 'false');
  sheet.classList.remove('open');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SCROLL ANIMATIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let _fadeObserver = null;
function observeFadeUp() {
  if (_fadeObserver) _fadeObserver.disconnect();
  _fadeObserver = new IntersectionObserver(es => {
    es.forEach(e => {
      if (e.isIntersecting) { e.target.classList.add('visible'); _fadeObserver.unobserve(e.target); }
    });
  }, { threshold: 0.08 });
  document.querySelectorAll('.fade-up:not(.visible)').forEach(el => _fadeObserver.observe(el));
  document.querySelectorAll('.stagger').forEach(c => {
    c.querySelectorAll('.fade-up').forEach((el, i) => { el.style.transitionDelay = (i * 0.04) + 's'; });
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
(async function() {
  const savedTheme = localStorage.getItem('visuarium-theme');
  if (savedTheme) {
    setTheme(savedTheme === 'light');
  } else {
    const prefersLight = window.matchMedia('(prefers-color-scheme: light)').matches;
    setTheme(prefersLight);
  }

  const savedLang = localStorage.getItem('visuarium-lang');
  const browserLang = (navigator.language || 'es').substring(0, 2);
  const initLang = savedLang || (browserLang === 'en' ? 'en' : 'es');

  lang = initLang;
  document.documentElement.setAttribute('lang', lang);
  langBtn.textContent = lang.toUpperCase();
  document.title = t('pageTitle');
  document.getElementById('searchInput').placeholder = t('searchPlaceholder');
  document.getElementById('footerLeft').textContent = t('footerLeft');
  document.getElementById('footerRight').innerHTML = `${t('footerRight')} <a class="text-[var(--accent-orange)] underline decoration-1 underline-offset-2 transition-colors duration-150 hover:text-[var(--text-primary)]" href="https://www.linkedin.com/in/johny-acosta-arteta-7416911b2/" target="_blank" rel="noopener">Johny</a>`;
  document.getElementById('mainHeading').textContent = t('pageTitle');

  // Render with static data immediately
  const hash = location.hash.replace('#', '') || SUBCATEGORIES[0].id;
  selectTab(hash, false);
  observeFadeUp();

  // Load from Google Sheets in background, re-render if data changed
  await loadFromSheets();
  if (SUBCATEGORIES !== STATIC_SUBCATEGORIES) {
    selectTab(currentTab || SUBCATEGORIES[0].id, false);
    observeFadeUp();
  }
})();
</script>

<!-- Mobile category bottom sheet (outside main to avoid z-index stacking context) -->
<div class="fixed inset-0 hidden" id="mobileCatSheet" style="z-index:200">
  <div class="absolute inset-0 bg-[var(--search-overlay-bg)] backdrop-blur-[4px]" onclick="closeMobileCategories()"></div>
  <div class="absolute bottom-0 left-0 right-0 bg-[var(--surface)] border-t border-[var(--surface-border)] rounded-t-2xl overflow-y-auto" id="mobileCatPanel" style="max-height:70vh;transform:translateY(100%);transition:transform .3s cubic-bezier(.16,1,.3,1)">
    <div class="px-5 py-4 border-b border-[var(--surface-border)] flex items-center justify-between" style="position:sticky;top:0;background:var(--surface);z-index:1">
      <span class="text-[15px] font-semibold text-[var(--text-primary)]" id="mobileCatTitle">CategorÃ­as</span>
      <button onclick="closeMobileCategories()" class="text-[var(--text-tertiary)] cursor-pointer" aria-label="Close"><svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>
    </div>
    <div class="p-3" id="mobileCatList" role="listbox"></div>
  </div>
</div>
</body></html>